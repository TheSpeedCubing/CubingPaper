From 24d819b76445c4293323ad2875350e9e05ac7012 Mon Sep 17 00:00:00 2001
From: speedcubing <git@speedcubing.top>
Date: Sat, 25 Jan 2025 03:13:33 +0800
Subject: [PATCH] Add an option to disable player data saving


diff --git a/src/main/java/net/minecraft/server/WorldNBTStorage.java b/src/main/java/net/minecraft/server/WorldNBTStorage.java
index b4056a28..62052bb5 100644
--- a/src/main/java/net/minecraft/server/WorldNBTStorage.java
+++ b/src/main/java/net/minecraft/server/WorldNBTStorage.java
@@ -36,6 +36,7 @@ public class WorldNBTStorage implements IDataManager, IPlayerFileData {
         this.dataDir.mkdirs();
         this.f = s;
         if (flag) {
+            if(top.speedcubing.cubingpaper.CubingPaperConfig.disablePlayerDataSaving) return; // CubingPaper
             this.playerDir.mkdirs();
         }
 
@@ -181,6 +182,7 @@ public class WorldNBTStorage implements IDataManager, IPlayerFileData {
     }
 
     public void save(EntityHuman entityhuman) {
+        if(top.speedcubing.cubingpaper.CubingPaperConfig.disablePlayerDataSaving) return; // CubingPaper
         try {
             NBTTagCompound nbttagcompound = new NBTTagCompound();
 
diff --git a/src/main/java/top/speedcubing/cubingpaper/CubingPaperConfig.java b/src/main/java/top/speedcubing/cubingpaper/CubingPaperConfig.java
index 28591b52..f7985846 100644
--- a/src/main/java/top/speedcubing/cubingpaper/CubingPaperConfig.java
+++ b/src/main/java/top/speedcubing/cubingpaper/CubingPaperConfig.java
@@ -106,4 +106,9 @@ public class CubingPaperConfig {
         config.addDefault(path, def);
         return config.getString(path, config.getString(path));
     }
+
+    public static boolean disablePlayerDataSaving;
+    private static void disablePlayerDataSaving() {
+        disablePlayerDataSaving = getBoolean("disablePlayerDataSaving", false);
+    }
 }
\ No newline at end of file
-- 
2.35.3.windows.1

